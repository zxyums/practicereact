type Language = {
  draftLanguageId: number | undefined;
  nonLatinLanguagesSupported: string;
  statusCode: string;
};

/**
 * Filters and updates the status of languages based on matching `nonLatinLanguagesSupported` keys.
 * Retains records with `draftLanguageId: undefined` as-is.
 *
 * @param {Language[]} languages - The array of language objects to process.
 * @param {string[]} inputKeys - Array of `nonLatinLanguagesSupported` keys to match against.
 * @returns {Language[]} - Updated array of languages.
 */
function updateStatusBasedOnKeys(
  languages: Language[],
  inputKeys: string[]
): Language[] {
  // Convert input keys to a Set for efficient lookup
  const validKeys = new Set(inputKeys);

  // Update the languages array
  return languages.map((language) => {
    // Retain records with `draftLanguageId: undefined`
    if (language.draftLanguageId === undefined) {
      return language;
    }

    // Extract the base key from `nonLatinLanguagesSupported`
    const baseKey = language.nonLatinLanguagesSupported.split(':')[0];

    // Check if the base key matches any key in the input
    if (validKeys.has(baseKey)) {
      // If it matches, retain statusCode as "1"
      return { ...language, statusCode: "1" };
    } else {
      // Otherwise, update statusCode to "0"
      return { ...language, statusCode: "0" };
    }
  });
}

// Example Usage
const languages: Language[] = [
  { draftLanguageId: 3358, nonLatinLanguagesSupported: "NL012:Arabic", statusCode: "1" },
  { draftLanguageId: 3417, nonLatinLanguagesSupported: "NL012:Arabic", statusCode: "1" },
  { draftLanguageId: 3418, nonLatinLanguagesSupported: "NL012:Arabic", statusCode: "0" },
  { draftLanguageId: 3419, nonLatinLanguagesSupported: "NL001:English", statusCode: "1" },
  { draftLanguageId: undefined, nonLatinLanguagesSupported: "NL010:French", statusCode: "1" }, // Should be retained as-is
  { draftLanguageId: 3422, nonLatinLanguagesSupported: "NL012:Arabic", statusCode: "1" },
  { draftLanguageId: undefined, nonLatinLanguagesSupported: "NL015", statusCode: "0" }, // Should be retained as-is
];

const inputKeys: string[] = ["NL012", "NL001"];

const updatedLanguages = updateStatusBasedOnKeys(languages, inputKeys);
console.log(updatedLanguages);